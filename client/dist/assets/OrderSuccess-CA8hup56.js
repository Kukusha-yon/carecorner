import{c as j,h as b,r as c,u,j as e}from"./index-DFyuifyJ.js";import{B as l}from"./Button-DN5n5fSN.js";import{g as N,a as v}from"./orderService-Hj6BzJ-j.js";import{S as w}from"./shopping-bag-UOUe7O6g.js";import{C as S}from"./circle-check-big-CjXnL9UI.js";import{P as I,M as O}from"./phone-DrGSfGFj.js";import{M as k}from"./mail-DLK6VVNb.js";const _=()=>{var m,x;const a=j(),s=b(),h=(m=s==null?void 0:s.state)==null?void 0:m.orderId;(x=s==null?void 0:s.state)!=null&&x.orderItems;const[g,f]=c.useState(10),[t,o]=c.useState(!1);c.useEffect(()=>{var i,d;((i=s==null?void 0:s.state)==null?void 0:i.from)==="checkout"?(o(!0),sessionStorage.setItem("orderSuccess","true"),(d=s==null?void 0:s.state)!=null&&d.orderId&&sessionStorage.setItem("lastOrderId",s.state.orderId)):sessionStorage.getItem("orderSuccess")==="true"&&o(!0)},[s]);const{data:C,isLoading:y}=u({queryKey:["userOrders"],queryFn:N,staleTime:0,refetchOnMount:!0,enabled:t}),r=h||sessionStorage.getItem("lastOrderId"),{data:n,isLoading:p}=u({queryKey:["order",r],queryFn:()=>r&&r.startsWith("mock_")?(console.log("Using mock order data, skipping fetch"),{_id:r}):r?v(r):null,enabled:!!r&&t,staleTime:0});return c.useEffect(()=>{if(!t)return;const i=setInterval(()=>{f(d=>d<=1?(clearInterval(i),a("/order-history"),0):d-1)},1e3);return()=>clearInterval(i)},[a,t]),t&&(y||p)&&!(r&&r.startsWith("mock_"))?e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-gray-50 py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#39b54a]"})}):t?e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-2xl w-full mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"mx-auto w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-12 h-12 text-[#39b54a]"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Thank you for your order!"}),e.jsxs("p",{className:"text-lg text-gray-600 mb-8",children:["We've received your order and will process it shortly.",n&&e.jsxs("span",{className:"block mt-2 font-medium",children:["Order #: ",n._id.slice(-8)]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Next Steps"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Our team will contact you within 24 hours to discuss your order details and arrange delivery."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:"+251 911 123 456"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:"orders@carecorner.com"})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Telegram: @carecorner"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{variant:"primary",size:"lg",fullWidth:!0,className:"bg-[#39b54a] hover:bg-[#2d8f3a] text-white",onClick:()=>a("/order-history"),children:"View Order Status"}),e.jsx(l,{variant:"outline",size:"lg",fullWidth:!0,className:"border-[#39b54a] text-[#39b54a] hover:bg-[#39b54a] hover:text-white",onClick:()=>a("/products"),children:"Continue Shopping"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["You will be automatically redirected to your order history in ",g," seconds."]})]})})}):e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-gray-50 py-12",children:e.jsx("div",{className:"max-w-2xl w-full mx-auto px-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[e.jsx(w,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Shopping Cart"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Ready to place an order? Browse our products and add items to your cart."}),e.jsx(l,{variant:"primary",size:"lg",fullWidth:!0,className:"bg-[#39b54a] hover:bg-[#2d8f3a] text-white",onClick:()=>a("/products"),children:"Shop Now"})]})})})};export{_ as default};
