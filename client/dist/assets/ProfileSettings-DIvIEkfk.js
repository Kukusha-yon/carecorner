import{k as N,r as i,j as e,l as P,V as l,n as y}from"./index-DFyuifyJ.js";import{B as w}from"./Button-DN5n5fSN.js";const k=()=>{const{user:t,setUser:g}=N(),[n,d]=i.useState(!1),[r,h]=i.useState({firstName:"",lastName:"",email:"",phoneNumber:""}),[o,b]=i.useState({currentPassword:"",newPassword:"",confirmPassword:""});i.useEffect(()=>{if(t){const[a,...s]=t.name.split(" ");h({firstName:a||"",lastName:s.join(" ")||"",email:t.email||"",phoneNumber:t.phoneNumber||""})}},[t]);const m=a=>{const{name:s,value:u}=a.target;h(f=>({...f,[s]:u}))},c=a=>{const{name:s,value:u}=a.target;b(f=>({...f,[s]:u}))},x=async a=>{a.preventDefault(),d(!0);try{const s=await P({name:`${r.firstName} ${r.lastName}`.trim(),email:r.email,phoneNumber:r.phoneNumber});g(s),l.success("Profile updated successfully")}catch(s){console.error("Error updating profile:",s),l.error(s.message||"Failed to update profile")}finally{d(!1)}},p=async a=>{if(a.preventDefault(),d(!0),o.newPassword!==o.confirmPassword){l.error("New passwords do not match"),d(!1);return}try{await y({currentPassword:o.currentPassword,newPassword:o.newPassword}),b({currentPassword:"",newPassword:"",confirmPassword:""}),l.success("Password changed successfully")}catch(s){console.error("Error changing password:",s),l.error(s.message||"Failed to change password")}finally{d(!1)}};return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Profile Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:r.phoneNumber,onChange:m,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]}),e.jsx(w,{type:"submit",disabled:n,className:"w-full bg-[#39b54a] hover:bg-[#2d8f3b] text-white mt-4 py-2 px-4 rounded-md font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-[#39b54a] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Saving...":"Save Profile Changes"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),e.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:o.currentPassword,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:o.newPassword,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:o.confirmPassword,onChange:c,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#39b54a] focus:ring-[#39b54a] sm:text-sm",required:!0})]}),e.jsx(w,{type:"submit",disabled:n,className:"w-full bg-[#39b54a] hover:bg-[#2d8f3b] text-white mt-4 py-2 px-4 rounded-md font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-[#39b54a] focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Changing Password...":"Change Password"})]})]})]})]})};export{k as default};
