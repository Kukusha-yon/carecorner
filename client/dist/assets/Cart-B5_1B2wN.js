import{f,c as b,b as w,k,r as c,j as e,V as C}from"./index-DFyuifyJ.js";import{B as n}from"./Button-DN5n5fSN.js";import{S as E}from"./shopping-bag-UOUe7O6g.js";import{P as S}from"./plus-eOj1peSO.js";import{T as D}from"./trash-2-Bwrh7WsY.js";/**
 * @license lucide-react v0.486.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M5 12h14",key:"1ays0h"}]],B=f("minus",F),P=()=>{const r=b(),{cartItems:i,removeFromCart:o,updateQuantity:u,clearCart:p}=w(),{user:d}=k(),[y,x]=c.useState(!1),[m,j]=c.useState(null);c.useEffect(()=>{const s=new Date,t=new Date(s);t.setDate(s.getDate()+5),j(t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}))},[]);const h=(s,t)=>{t<1?o(s):u(s,t)},N=async()=>{if(!d){C.error("Please sign in to proceed to checkout"),r("/login",{state:{from:"/cart"}});return}x(!0);try{r("/checkout")}catch(s){console.error("Error during checkout:",s)}finally{x(!1)}},a=Array.isArray(i)?i:[];if(a.length===0)return e.jsx("div",{className:"min-h-screen bg-gray-50 pt-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsx(E,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your cart is empty"}),e.jsx("p",{className:"text-gray-500 mb-8",children:"Looks like you haven't added any items to your cart yet."}),e.jsx(n,{variant:"primary",onClick:()=>r("/products"),className:"bg-[#FFD814] hover:bg-[#F7CA00] text-black",children:"Continue Shopping"})]})})});const l=a.reduce((s,t)=>s+(t.price||0)*t.quantity,0),g=l>0?10:0,v=l+g;return e.jsx("div",{className:"min-h-screen bg-gray-50 pt-24",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Shopping Cart"}),e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-12",children:[e.jsx("div",{className:"lg:col-span-7",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:a.map((s,t)=>e.jsxs("div",{className:`flex items-center p-6 ${t!==a.length-1?"border-b border-gray-200":""}`,children:[e.jsx("img",{src:s.image,alt:s.title||s.name,className:"w-24 h-24 object-cover rounded-lg"}),e.jsxs("div",{className:"ml-6 flex-1",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.title||s.name}),s.price&&e.jsxs("p",{className:"mt-1 text-lg font-medium text-gray-900",children:["ETB ",s.price.toFixed(2)]}),e.jsxs("div",{className:"mt-4 flex items-center",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>h(s._id,s.quantity-1),className:"p-2 text-gray-600 hover:text-gray-900",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx("span",{className:"px-4 py-2 text-gray-900",children:s.quantity}),e.jsx("button",{onClick:()=>h(s._id,s.quantity+1),className:"p-2 text-gray-600 hover:text-gray-900",children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>o(s._id),className:"ml-4 text-red-600 hover:text-red-700 flex items-center",children:[e.jsx(D,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]}),e.jsx("div",{className:"ml-6 text-right",children:e.jsxs("p",{className:"text-lg font-medium text-gray-900",children:["ETB ",((s.price||0)*s.quantity).toFixed(2)]})})]},s._id))})}),e.jsx("div",{className:"lg:col-span-5 mt-8 lg:mt-0",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sticky top-24",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600",children:["Subtotal (",a.length," items)"]}),e.jsxs("span",{className:"text-gray-900",children:["ETB ",l.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Shipping & handling"}),e.jsxs("span",{className:"text-gray-900",children:["ETB ",g.toFixed(2)]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-lg font-medium text-gray-900",children:"Total"}),e.jsxs("span",{className:"text-lg font-medium text-gray-900",children:["ETB ",v.toFixed(2)]})]})})]}),m&&e.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Estimated delivery: ",m]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx(n,{variant:"primary",size:"lg",className:"w-full bg-[#39b54a] hover:bg-[#39b54a] text-black font-medium",onClick:N,loading:y,children:"Proceed to Checkout"}),e.jsx(n,{variant:"outline",size:"lg",className:"w-full",onClick:p,children:"Clear Cart"})]}),!d&&e.jsx("p",{className:"mt-4 text-sm text-gray-500 text-center",children:"You'll need to sign in to complete your purchase"})]})})]})]})})};export{P as default};
