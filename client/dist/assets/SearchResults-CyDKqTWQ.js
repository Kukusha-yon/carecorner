import{p as o,u as h,j as e,q as d}from"./index-DFyuifyJ.js";import{s as g}from"./productService-DI1icBLi.js";import{S as j}from"./star-DahzeS3x.js";const N=()=>{const[i]=o(),a=i.get("q")||"";console.log("SearchResults - Query from URL:",a);const{data:r,isLoading:c,error:n}=h({queryKey:["search",a],queryFn:async()=>{if(!a)return[];console.log("SearchResults - Executing search for query:",a);try{const s=await g(a);return console.log("SearchResults - Search results:",s),Array.isArray(s)?s:(console.error("SearchResults - Invalid response format:",s),[])}catch(s){throw console.error("SearchResults - Search error:",s),s}},enabled:!!a,retry:1});console.log("SearchResults - Current state:",{isLoading:c,error:n,productsCount:r==null?void 0:r.length,query:a,products:r==null?void 0:r.slice(0,2)});const m=s=>[...Array(5)].map((t,l)=>e.jsx(j,{className:`h-4 w-4 ${l<Math.floor(s)?"text-yellow-400 fill-current":"text-gray-300"}`},l));return c?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#39b54a]"})}):n?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:"Failed to fetch search results"}),e.jsx("p",{className:"text-gray-600",children:"Please try again later"})]})}):e.jsxs("div",{className:"min-h-screen bg-white pt-16",children:[e.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto py-4 px-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[(r==null?void 0:r.length)||0," results for ",e.jsxs("span",{className:"font-bold",children:['"',a,'"']})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsx("div",{className:"space-y-4",children:(r==null?void 0:r.length)===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No results found"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Try adjusting your search terms or browse our categories"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:r==null?void 0:r.map(s=>{var t;return e.jsx(d,{to:`/products/${s._id}`,className:"block",children:e.jsxs("div",{className:"flex gap-6 p-4 border border-gray-200 rounded-lg hover:shadow-lg transition-shadow duration-200",children:[e.jsx("div",{className:"w-48 h-48 flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-medium text-[#39b54a] hover:text-[#2d8f3a]",children:s.name}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex",children:m(s.rating||0)}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["(",((t=s.reviews)==null?void 0:t.length)||0,")"]})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:"text-2xl font-medium",children:["$",s.price.toLocaleString()]})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:s.description}),s.specs&&e.jsx("div",{className:"mt-2",children:e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:Object.entries(s.specs).slice(0,3).map(([l,x])=>e.jsxs("li",{children:["â€¢ ",l,": ",x]},l))})})]})]})},s._id)})})})})]})};export{N as default};
